<!-- templates/founder.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hi Founder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Join the HAT platform as a founder and start your journey.">
    <!-- Stylesheet -->
    <link rel="stylesheet" href="/static/styles.css">
    <!-- Favicon -->
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
</head>
<body>
<header>
    <h1>Hi Founder</h1>
</header>
<main class="container">
    <p>Welcome to the project! Your journey as a founder begins here.</p>
</main>
<footer class="footer">
    &copy; 2023 HAT Platform. All rights reserved.
</footer>
<script>
    const TUNNEL_URL = "{{ TUNNEL_URL }}";

    if (!TUNNEL_URL) {
        console.error("TUNNEL_URL is not defined.");
        alert("Internal error. Please try again later.");
    }

    // Ensure the message length does not exceed the Telegram limit
    async function sendMessage(message) {
        const MAX_LENGTH = 4096;
        try {
            if (message.length > MAX_LENGTH) {
                let start = 0;
                while (start < message.length) {
                    const part = message.substring(start, start + MAX_LENGTH);
                    console.log(`Sending message part of length ${part.length}`);
                    await sendPart(part);
                    start += MAX_LENGTH;
                }
            } else {
                console.log(`Sending message of length ${message.length}`);
                await sendPart(message);
            }
        } catch (error) {
            console.error("Error sending message:", error);
            alert("An error occurred while sending the message. Please try again later.");
        }
    }

    // Send the message part with additional error handling
    async function sendPart(part) {
        try {
            if (part.length > 4096) {
                throw new Error('Message part exceeds the allowed length of 4096 characters');
            }
            // Replace this with the actual sending logic, e.g., using an API call
            const response = await fetch(TUNNEL_URL + '/send_message', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ message: part })
            });
            if (!response.ok) {
                throw new Error('Failed to send message part');
            }
            console.log("Message part sent successfully:", part);
        } catch (error) {
            console.error("Error sending message part:", error);
            throw error;
        }
    }
</script>
<script src="/static/app.js"></script>
</body>
</html>